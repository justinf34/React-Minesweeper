(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{67:function(e,t,n){e.exports=n(78)},72:function(e,t,n){},73:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),s=n.n(i),o=(n(72),n(16)),l=n(17),c=n(12),u=n(29),h=n(28),d=(n(73),n(46)),f=n(56),m=n.n(f),v=n(45),g=n.n(v),p=n(104),k=n(116),y=n(110),b=Object(p.a)((function(e){return{select:{width:"6rem"}}}));function E(e){var t=b(),n=Object(a.useState)(0),i=Object(d.a)(n,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){var t=null;return e.start?t=setInterval((function(){o((function(e){return e+1}))}),1e3):e.start||0===s||(clearInterval(t),e.setTime(s),o(0)),function(){clearInterval(t)}}),[s,e.start]),r.a.createElement("div",{className:"header"},r.a.createElement(k.a,{value:e.diff,variant:"outlined",onChange:function(t){e.onDiffChange(t.target.value)},classes:{select:t.select}},r.a.createElement(y.a,{value:"Easy"},"Easy"),r.a.createElement(y.a,{value:"Medium"},"Medium")),r.a.createElement("div",{className:"flag-container"},r.a.createElement("span",{id:"flag-logo"},r.a.createElement(g.a,null)),r.a.createElement("span",{id:"flag-counter"},e.flags)),r.a.createElement("div",{className:"timer-container"},r.a.createElement("span",{id:"clock-logo"},r.a.createElement(m.a,null))," ",r.a.createElement("span",{id:"time"},s)))}var w=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleButtonPress=a.handleButtonPress.bind(Object(c.a)(a)),a.handleButtonRelease=a.handleButtonRelease.bind(Object(c.a)(a)),a.rightClick=a.rightClick.bind(Object(c.a)(a)),a.flag=!1,a}return Object(l.a)(n,[{key:"handleButtonPress",value:function(e){var t=this;1===e.nativeEvent.which&&(this.flag=!0,this.buttonPressTimer=setTimeout((function(){t.flag=!1,console.log("long press activated "),t.props.mark(t.props.y,t.props.x)}),1500))}},{key:"handleButtonRelease",value:function(e){1===e.nativeEvent.which&&(clearTimeout(this.buttonPressTimer),this.flag&&(console.log("Not long enough..."),this.props.uncover(this.props.y,this.props.x),this.flag=!1),console.log("Log hold stopped"))}},{key:"rightClick",value:function(e){e.preventDefault(),console.log(e.type),console.log("Putting flag..."),this.props.mark(this.props.y,this.props.x)}},{key:"getClass",value:function(){switch(this.props.val){case"H":return"";case"F":return"flag";case"M":return"bomb";default:return 0==Number(this.props.val)?"opened":"opened mine"+this.props.val}}},{key:"render",value:function(){return r.a.createElement("div",{className:"cell "+this.getClass(),onMouseDown:this.handleButtonPress,onMouseUp:this.handleButtonRelease,onTouchStart:this.handleButtonPress,onTouchEnd:this.handleButtonRelease,onContextMenu:this.rightClick})}}]),n}(a.Component),j=n(118),C=n(111),O=n(109),B=n(81),M=n(112),S=n(119),D=n(113),x=n(114),T=n(115),R=n(57),P=n.n(R);function N(e){var t=e.open,n=e.game_state,a=e.time_elapsed,i=e.num_flags,s=e.onClose;return r.a.createElement(j.a,{onClose:s,open:t,"aria-labelledby":"game-over-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0},r.a.createElement(C.a,{id:"game-over-dialog-title"},n?"You Won!":"Game Over!"),r.a.createElement(O.a,null,r.a.createElement(B.a,{key:0},r.a.createElement(M.a,null,r.a.createElement(S.a,null,r.a.createElement(g.a,null))),r.a.createElement(D.a,{primary:i})),r.a.createElement(B.a,{key:1},r.a.createElement(M.a,null,r.a.createElement(S.a,null,r.a.createElement(P.a,null))),r.a.createElement(D.a,{primary:a}))),r.a.createElement(x.a,null,r.a.createElement(T.a,{onClick:s},"Play Again")))}var _=function(){function e(e,t){var n=[Math.ceil(e),Math.floor(t)];return t=n[1],(e=n[0])+Math.floor(Math.random()*(t-e+1))}return function(){function t(){Object(o.a)(this,t),this.init(8,10,10)}return Object(l.a)(t,[{key:"validCoord",value:function(e,t){return e>=0&&e<this.nrows&&t>=0&&t<this.ncols}},{key:"init",value:function(e,t,n){this.nrows=e,this.ncols=t,this.nmines=n,this.nmarked=0,this.nuncovered=0,this.exploded=!1,this.arr=function(e,t,n){for(var a=[],r=0;r<e;r++){a[r]=[];for(var i=0;i<t;i++)a[r][i]=n(r,i)}return a}(e,t,(function(){return{mine:!1,state:"hidden",count:0}}))}},{key:"count",value:function(e,t){for(var n,a,r=this,i=0,s=-1;s<=1;s++)for(var o=-1;o<=1;o++)i+=(n=e+s,a=t+o,r.validCoord(n,a)&&r.arr[n][a].mine?1:0);return i}},{key:"sprinkleMines",value:function(t,n){for(var a=[],r=0;r<this.nrows;r++)for(var i=0;i<this.ncols;i++)(Math.abs(t-r)>2||Math.abs(n-i)>2)&&a.push([r,i]);this.nmines=Math.min(this.nmines,a.length);for(var s=0;s<this.nmines;s++){var o=e(s,a.length-1),l=[a[o],a[s]];a[s]=l[0],a[o]=l[1];var c=Object(d.a)(a[s],2),u=c[0],h=c[1];this.arr[u][h].mine=!0}for(var f=0;f<this.nrows;f++)for(var m=0;m<this.ncols;m++)"marked"==this.arr[f][m].state&&(this.arr[f][m].state="hidden"),this.arr[f][m].count=this.count(f,m);for(var v=[],g=0;g<this.nrows;g++){for(var p="",k=0;k<this.ncols;k++)p+=this.arr[g][k].mine?"B":".";p+="  |  ";for(var y=0;y<this.ncols;y++)p+=this.arr[g][y].count.toString();v[g]=p}console.log("Mines and counts after sprinkling:"),console.log(v.join("\n"),"\n")}},{key:"uncover",value:function(e,t){var n=this;if(console.log("uncover",e,t),!this.validCoord(e,t))return!1;if(0===this.nuncovered&&(this.nmarked=0,this.sprinkleMines(e,t)),"hidden"!==this.arr[e][t].state)return!1;return function e(t,a){n.validCoord(t,a)&&"hidden"===n.arr[t][a].state&&(n.arr[t][a].state="shown",n.nuncovered++,0===n.arr[t][a].count&&(e(t-1,a-1),e(t-1,a),e(t-1,a+1),e(t,a-1),e(t,a+1),e(t+1,a-1),e(t+1,a),e(t+1,a+1)))}(e,t),this.arr[e][t].mine&&(this.exploded=!0),!0}},{key:"mark",value:function(e,t){return console.log("mark",e,t),!!this.validCoord(e,t)&&(console.log("marking previous state=",this.arr[e][t].state),"shown"!==this.arr[e][t].state&&(this.nmarked+="marked"==this.arr[e][t].state?-1:1,this.arr[e][t].state="marked"==this.arr[e][t].state?"hidden":"marked",!0))}},{key:"getRendering",value:function(){for(var e=[],t=0;t<this.nrows;t++){for(var n="",a=0;a<this.ncols;a++){var r=this.arr[t][a];this.exploded&&r.mine?n+="M":"hidden"===r.state?n+="H":"marked"===r.state?n+="F":r.mine?n+="M":n+=r.count.toString()}e[t]=n}return e}},{key:"getStatus",value:function(){return{done:this.exploded||this.nuncovered===this.nrows*this.ncols-this.nmines,exploded:this.exploded,nrows:this.nrows,ncols:this.ncols,nmarked:this.nmarked,nuncovered:this.nuncovered,nmines:this.nmines}}}]),t}()}(),I=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={game:new _,open:!1,flags:10,start:!1,timer:0},a.uncover=a.uncover.bind(Object(c.a)(a)),a.mark=a.mark.bind(Object(c.a)(a)),a.handleClose=a.handleClose.bind(Object(c.a)(a)),a.setTime=a.setTime.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"renderBoard",value:function(e){var t=this;return e.map((function(e,n){return e.split("").map((function(e,a){return r.a.createElement(w,{val:e,key:a+","+n,x:a,y:n,uncover:t.uncover,mark:t.mark})}))}))}},{key:"uncover",value:function(e,t){this.state.game.uncover(e,t)&&(console.log("After uncovering (",e,t,")\n",this.state.game.getRendering().join("\n")),this.state.start?this.checkStatus(!1):this.checkStatus(!0))}},{key:"mark",value:function(e,t){this.state.game.mark(e,t)&&(console.log("After marking (",e,t,")\n",this.state.game.getRendering().join("\n")),this.checkStatus(!1))}},{key:"checkStatus",value:function(e){this.state.game.getStatus().done?this.setState((function(e,t){return{open:!0,start:!1}})):e?(console.log("first move"),this.setState({start:!0})):this.setState({})}},{key:"initBoard",value:function(){var e,t,n,a=new _;console.log(this.props.diff),"Easy"===this.props.diff?(e=8,t=10,n=10):(e=14,t=18,n=40),a.init(e,t,n),console.log("Start of game: \n",a.getRendering().join("\n")),this.setState((function(e,t){return{game:a,open:!e,flags:n,start:!1,timer:0}}))}},{key:"handleClose",value:function(){console.log("Closing dialog..."),this.initBoard()}},{key:"setTime",value:function(e){this.setState((function(t,n){return{timer:e}}))}},{key:"componentDidMount",value:function(){this.initBoard()}},{key:"componentDidUpdate",value:function(e){e.diff!==this.props.diff&&(console.log("Difficulty changed"),this.initBoard())}},{key:"render",value:function(){var e=this.state.game,t=e.getStatus();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{diff:this.props.diff,onDiffChange:this.props.changeDifficulty,flags:this.state.flags-t.nmarked,start:this.state.start,setTime:this.setTime}),r.a.createElement("div",{className:"gridwrapper"},r.a.createElement("div",{className:"grid "+this.props.diff.toLowerCase()},this.renderBoard(e.getRendering())),r.a.createElement(N,{open:this.state.open,game_state:t.nuncovered===t.nrows*t.ncols-t.nmines,time_elapsed:this.state.timer,num_flags:t.nmarked,onClose:this.handleClose})))}}]),n}(a.Component),A=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={difficulty:"Easy"},a.changeDifficulty=a.changeDifficulty.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"changeDifficulty",value:function(e){this.setState({difficulty:e})}},{key:"render",value:function(){return r.a.createElement(I,{diff:this.state.difficulty,changeDifficulty:this.changeDifficulty})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[67,1,2]]]);
//# sourceMappingURL=main.2812b7fc.chunk.js.map